<!--
  Generated template for the CustomerServeDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>售后详情</ion-title>
  </ion-navbar>

</ion-header>


<ion-content class="gray_bg">
  <ul class="customer_serve_list" *ngIf="returnInfo">
    <li>
      <p class="title">
        <span>
          {{returnInfo[0].createTimeName}}
        </span>
      </p>
      <div class="content">
        <p class="title">
          买家发起的售后申请：
        </p>
        <section class="order_goods_section_item">
          <div class="R_pr R_clearfix">
              <!-- <ion-checkbox [checked]="true"></ion-checkbox> -->
              <div class="R_fl item_left">
                  <img [src]="mainCtrl.imgFilter(returnInfo[0].goodsImg,'?x-oss-process=image/resize,m_fixed,h_142,w_142')" alt="">
              </div>
              <div class="R_fl item_middle">
                <p>
                  {{returnInfo[0].goodsName}}
                </p>
                <p class="A3A3A3">
                  规格：{{returnInfo[0].goodsSpecName}}
                </p>
              </div>
              <div class="R_fr item_right">
                  <p>
                    {{returnInfo[0].returnMoney | currency}}
                  </p>
                  <p>
                    x{{returnInfo[0].goodsNum}}
                  </p>
              </div>
          </div>
        </section>
        <div class="des">
          <p>
            换货原因：{{returnInfo[0].returnReason}}
          </p>
          <p *ngIf="returnInfo[0].goodsStatus">
            货物状态：{{returnInfo[0].goodsStatus?'已收到货':'未收到货'}}
          </p>
          <p *ngIf="returnInfo[0].returnMoney">
            退款金额：{{returnInfo[0].returnMoney | currency}}
          </p>
          <p>
            申请件数：{{returnInfo[0].goodsNum}}
          </p>
          <!-- <p>
            售后编码：111111111
          </p> -->
        </div>

      </div>
    </li>
    <li *ngIf="returnInfo[1]">
      <p class="title">
        <span>
          {{returnInfo[1].createTimeName}}
        </span>
      </p>
      <div class="content">
        <p class="title" *ngIf="[2,7].indexOf(returnInfo[0].returnStatus) == -1">
          审核通过：
        </p>
        <p class="title" *ngIf="returnInfo[0].returnStatus == 7">
          已取消：
        </p>
        <p class="title" *ngIf="returnInfo[0].returnStatus == 2">
          审核未通过：
        </p>
        <div class="des padding_0 padding_l_24">
          <!-- 买家取消申请  -->
          <div class="item" *ngIf="returnInfo[0].returnStatus == 7">
              <p>
                  买家已撤回本次售后申请
                </p>
          </div> 
          <!-- 卖家审核未通过 -->
          <div class="item" *ngIf="returnInfo[0].returnStatus == 2">
                <p>
                  {{returnInfo[1].sellerMarks}}
                </p>
          </div>
          <!-- 卖家审核通过 -->
          <div class="item" *ngIf="[2,7].indexOf(returnInfo[0].returnStatus) == -1">
                <p>
                  商家同意了本次售后服务申请：
                </p>
                <p *ngIf="returnInfo[0].returnOrChange == 1 || returnInfo[0].returnOrChange == 2">
                  同意换货数量：{{returnInfo[0].goodsNum}}
                </p>
                <p *ngIf="returnInfo[0].returnOrChange == 0 || returnInfo[0].returnOrChange == 1">
                  同意退款金额：{{returnInfo[0].returnMoney | currency}}
                </p>
          </div>
          <div class="item" *ngIf="returnInfo[0].returnOrChange != 0 ">
              <p>
                  请将商品寄到如下地址：
              </p>
              <p>
                收货地址：{{returnInfo[1].companyAddress}}
              </p>
              <p>
                收货人姓名：{{returnInfo[1].sellerName}}
              </p>
              <p>
                联系电话 {{returnInfo[1].sellerPhone}}
              </p>
        </div>
        </div>

      </div>
    </li>
    <li *ngIf="returnInfo[2]">
      <p class="title">
        <span>
          {{returnInfo[2].createTimeName}}
        </span>
      </p>
      <div class="content">
          <p class="title colorFF0A0A">
              买家已发货
          </p>
          <div class="des padding_0 padding_l_24">
              <div class="item">
                  <p>
                    获取信息如下：
                  </p>
                  <p>
                    物流公司：{{returnInfo[2].buyerShippingName}}
                  </p>
                  <p>
                    物流单号：{{returnInfo[2].buyerShippingNo}}
                  </p>
            </div>
          </div>
        </div> 
    </li>  
    <!-- 退货退款成功， -->
    <li *ngIf="returnInfo[3] && returnInfo[0].returnOrChange == 1">
        <p class="title">
          <span>
            {{returnInfo[3].createTimeName}}
          </span>
        </p>
        <div class="content">
            <p class="title colorFF0A0A">
                退款成功
            </p>
            <div class="des padding_0 padding_l_24">
                <div class="item">
                    <p>
                      退款金额：<span style="color:#FF0A0A">
                          {{returnInfo[0].returnMoney | currency}}
                        </span>
                    </p>
                    <p *ngIf="returnInfo[3].sellerShippingName">
                      物流公司：{{returnInfo[3].sellerShippingName}}
                    </p>
                    <p *ngIf="returnInfo[3].sellerShippingNo">
                      物流单号：{{returnInfo[3].sellerShippingNo}}
                    </p>
              </div>
            </div>
          </div> 
    </li> 
     <!-- 换货成功， -->
    <li *ngIf="returnInfo[3] && returnInfo[0].returnOrChange == 2">
        <p class="title">
          <span>
            {{returnInfo[3].createTimeName}}
          </span>
        </p>
        <div class="content">
            <p class="title colorFF0A0A">
                商家已发货
            </p>
            <div class="des padding_0 padding_l_24">
                <div class="item">
                    <p>
                      货物信息如下：
                    </p>
                    <p *ngIf="returnInfo[3].sellerShippingName">
                      物流公司：{{returnInfo[3].sellerShippingName}}
                    </p>
                    <p *ngIf="returnInfo[3].sellerShippingNo">
                      物流单号：{{returnInfo[3].sellerShippingNo}}
                    </p>
              </div>
            </div>
          </div> 
    </li> 
     <!-- 买家确认收货， -->
     <li *ngIf="returnInfo[4] && returnInfo[0].returnOrChange == 2">
        <p class="title">
          <span>
            {{returnInfo[4].createTimeName}}
          </span>
        </p>
        <div class="content">
            <p class="title">
                买家已确认收货
            </p>
          </div> 
    </li> 
      <!-- 买家填写物流信息 如果【2】有数据就不显示 -->
    <li *ngIf="returnInfo[1] && returnInfo[0].returnStatus == 1 && returnInfo[0].returnOrChange != 0 && !returnInfo[2]">
      <!-- <p class="title">
        <span>
          2018年2月28日 12:00
        </span>
      </p> -->
      <div class="content">
        <p class="title">
          请填写发货信息：
        </p>
        <p class="title" style="position:relative" (click)="selectedLogisticsCompany()">
            {{Logistics.txt || '请选择物流公司' }}
            <ion-icon class="ion-ios-icon-gxk-51">
            
            </ion-icon>
        </p>
        <p class="title" style="position:relative">
              {{Logistics.scan  || '请填写物流单号'}}
          <ion-icon class="ion-ios-icon-gxk-155" (click)="scanCode()">
            
          </ion-icon>
        </p>
        <p class="title R_clearfix">
            <button class="R_fr" (click)="save()">
              保存
            </button>
          </p>
      </div>
    </li>
    <li class="white" *ngIf="!returnInfo[1]">
        <p class="title R_clearfix _row" (click)="revoke()">
            <button class="R_fr">
              撤销申请
            </button>
          </p>
    </li>  
  </ul>
</ion-content>
